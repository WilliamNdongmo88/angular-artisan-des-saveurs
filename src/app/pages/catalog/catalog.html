<!-- Page Header -->
<section class="hero-section">
  <div class="hero-background">
    <img src="img/hero/hero-boucherie.jpg" alt="Artisan des Saveurs" class="hero-image" />
  </div>
  <div class="hero-overlay"></div>

  <div class="hero-content">
    <div class="container">
      <div class="hero-text">
        <h1 class="hero-title">
          {{ 'catalog.header.title' | translate }}
        </h1>
        <p class="hero-subtitle">
          {{ 'catalog.header.subtitle' | translate }}
        </p>
      </div>
    </div>
  </div>
</section>


<!-- Filters Section -->
<section class="filters-section">
  <div class="container">
    <div class="filters-content">
      <!-- Search Bar -->
      <div class="search-bar">
        <input 
          type="text" 
          [placeholder]="'catalog.filters.searchPlaceholder' | translate"
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()"
          class="search-input">
        <div class="search-icon">üîç</div>
      </div>

      <!-- Category Filters -->
      <div class="category-filters">
        <button 
          class="filter-btn"
          [class.active]="selectedCategory === 'all'"
          (click)="onCategoryChange('all')">
          {{ 'catalog.filters.allProducts' | translate }}
        </button>
        <button 
          *ngFor="let category of categories"
          class="filter-btn"
          [class.active]="selectedCategory === category"
          (click)="onCategoryChange(category)">
          {{ getCategoryDisplayName(category) }}
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Products Section -->
<section class="products-section">
  <div class="container">
    <!-- Results Info -->
    <div class="results-info" *ngIf="searchTerm || selectedCategory !== 'all'">
      <p>
        {{ (searchTerm ? 'catalog.results.foundWithSearch' : 'catalog.results.found')
           | translate:{count: filteredProducts.length, term: searchTerm} }}
      </p>
    </div>

    <!-- No Results -->
    <div class="no-results" *ngIf="filteredProducts.length === 0">
      <div class="no-results-content">
        <div class="no-results-icon">üîç</div>
        <h3>{{ 'catalog.noResults.title' | translate }}</h3>
        <p>{{ 'catalog.noResults.message' | translate }}</p>
        <button class="btn btn-primary" (click)="selectedCategory = 'all'; searchTerm = ''; filterProducts()">
          {{ 'catalog.noResults.seeAll' | translate }}
        </button>
      </div>
    </div>

    <!-- Products by Category -->
    <div *ngIf="filteredProducts.length > 0">
      <!-- Show all products if no specific category selected -->
      <div *ngIf="selectedCategory === 'all' && !searchTerm">
        <div *ngFor="let category of categories" class="category-section">
          <div class="category-header">
            <h2 class="category-title">{{ getCategoryDisplayName(category) }}</h2>
            <div class="category-divider"></div>
          </div>
          
          <div class="products-grid">
            <app-product-card 
              *ngFor="let product of getProductsByCategory(category); trackBy: trackByProductId"
              [product]="product">
            </app-product-card>
          </div>
        </div>
      </div>

      <!-- Show filtered products -->
      <div *ngIf="selectedCategory !== 'all' || searchTerm" class="filtered-products">
        <div class="products-grid">
          <app-product-card 
            *ngFor="let product of filteredProducts; trackBy: trackByProductId"
            [product]="product">
          </app-product-card>
        </div>
      </div>
    </div>

    <!-- Contact CTA -->
    <div class="catalog-cta">
      <div class="cta-content">
        <h3>{{ 'catalog.cta.title' | translate }}</h3>
        <p>{{ 'catalog.cta.message' | translate }}</p>
        <a routerLink="/contact" class="btn btn-primary">
          {{ 'catalog.cta.button' | translate }}
        </a>
      </div>
    </div>
  </div>
</section>

<app-scroll-to-top></app-scroll-to-top>
