<nav class="navbar">
  <div class="container">
    <a class="navbar-brand" routerLink="/">
      <h3 class="brand-title">Artisan des Saveurs</h3>
    </a>
    
    <button 
      class="navbar-toggler" 
      type="button" 
      (click)="toggleMenu()"
      [class.active]="isMenuOpen"
      [attr.aria-expanded]="isMenuOpen"
      aria-label="Toggle navigation menu">
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="navbar-collapse" [class.show]="isMenuOpen">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="closeMenu()">
            Accueil
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/catalog" routerLinkActive="active" (click)="closeMenu()">
            Nos Produits
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/about" routerLinkActive="active" (click)="closeMenu()">
            À Propos
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/contact" routerLinkActive="active" (click)="closeMenu()">
            Contact
          </a>
        </li>
        
        <!-- Menu admin -->
        <li class="nav-item" *ngIf="currentUser && isAdmin()">
          <a class="nav-link admin-link" routerLink="/dashboard" routerLinkActive="active" (click)="closeMenu()">
            Dashboard
          </a>
        </li>

        <!-- Profil utilisateur -->
        <li class="nav-item" *ngIf="currentUser && this.authService.isAuthenticated() && !isAdmin()">
          <a class="nav-link admin-link" routerLink="/profil" routerLinkActive="active" (click)="closeMenu()">
            Profil
          </a>
        </li>
      </ul>
      
      <!-- Menu utilisateur -->
      <div class="user-menu">
        <div *ngIf="!currentUser" class="auth-links">
          <a class="nav-link login-link" routerLink="/login" (click)="closeMenu()">Connexion</a>
          <a class="nav-link register-link" routerLink="/register" (click)="closeMenu()">Inscription</a>
        </div>
        
        <div *ngIf="currentUser" class="user-info">
          <span class="user-name">{{ currentUser.username }}</span>
          <button class="logout-btn" (click)="logout()">Déconnexion</button>
        </div>
      </div>
    </div>
    
    <!-- Icône profil (click)="toggleProfileMenu()" -->
    <div class="profile-icon" >
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M4 22V20C4 16 8 14 12 14C16 14 20 16 20 20V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    
    <!-- Icône panier -->
    <div class="cart-icon" (click)="toggleCart()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V16.5M9 19.5C9.8 19.5 10.5 20.2 10.5 21S9.8 22.5 9 22.5 7.5 21.8 7.5 21 8.2 19.5 9 19.5ZM20 19.5C20.8 19.5 21.5 20.2 21.5 21S20.8 22.5 20 22.5 18.5 21.8 18.5 21 19.2 19.5 20 19.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
    </div>

  </div>
</nav>

